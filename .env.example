# Server Configuration
PORT=3000
HOST=0.0.0.0
BASE_DOMAIN=localhost

# Mode Configuration
# proxy = fetch, verify, and serve content
# route = redirect to gateway URL
DEFAULT_MODE=proxy
ALLOW_MODE_OVERRIDE=true

# ============================================================================
# VERIFICATION SETTINGS - Determines how we verify data integrity
# ============================================================================
# When enabled, all content is verified before serving (only verified data reaches clients)
# When disabled, content is proxied directly without verification
VERIFICATION_ENABLED=true

# Where to get trusted gateways for hash verification
# top-staked = use top N staked gateways from ar.io network (RECOMMENDED for trust)
# static = use VERIFICATION_STATIC_GATEWAYS list
VERIFICATION_GATEWAY_SOURCE=top-staked

# Number of top staked gateways to use for verification (when source is 'top-staked')
# More gateways = higher trust, but slower verification
VERIFICATION_GATEWAY_COUNT=3

# Static trusted gateways for verification (when source is 'static')
VERIFICATION_STATIC_GATEWAYS=https://arweave.net,https://ar-io.dev

# ArNS Consensus
# Minimum number of trusted gateways that must agree on ArNS resolution
ARNS_CONSENSUS_THRESHOLD=2

# ============================================================================
# ROUTING SETTINGS - Determines where we fetch data from
# ============================================================================
# Routing strategy:
# fastest = concurrent ping, use first responder
# random = random selection from healthy gateways
# round-robin = sequential rotation through gateways
ROUTING_STRATEGY=fastest

# Where to get the list of gateways for routing
# network = fetch ALL gateways from ar.io registry (RECOMMENDED for availability)
# trusted-peers = fetch from gateway's /ar-io/peers endpoint
# static = use ROUTING_STATIC_GATEWAYS list only
ROUTING_GATEWAY_SOURCE=network

# Gateway to query for trusted peers list (when ROUTING_GATEWAY_SOURCE=trusted-peers)
TRUSTED_PEER_GATEWAY=https://arweave.net

# Static gateways for routing (when ROUTING_GATEWAY_SOURCE=static)
ROUTING_STATIC_GATEWAYS=https://arweave.net,https://ar-io.dev

# ============================================================================
# NETWORK GATEWAY SETTINGS (shared by routing and verification network sources)
# ============================================================================
# How often to refresh the gateway list from ar.io network (milliseconds, default 24 hours)
NETWORK_GATEWAY_REFRESH_MS=86400000

# Minimum gateways required to operate (fail-safe)
NETWORK_MIN_GATEWAYS=3

# Fallback gateways if network fetch fails
NETWORK_FALLBACK_GATEWAYS=https://arweave.net,https://ar-io.dev

# Resilience Settings
RETRY_ATTEMPTS=3
RETRY_DELAY_MS=100
GATEWAY_HEALTH_TTL_MS=300000
CIRCUIT_BREAKER_THRESHOLD=3
CIRCUIT_BREAKER_RESET_MS=60000

# Cache Settings
ARNS_CACHE_TTL_MS=300000
# Verified content cache - stores verified Arweave content for fast repeat access
CONTENT_CACHE_ENABLED=true
# Maximum total cache size (50GB default)
CONTENT_CACHE_MAX_SIZE_BYTES=53687091200
# Maximum size for individual cached items (2GB default)
CONTENT_CACHE_MAX_ITEM_SIZE_BYTES=2147483648
# Cache storage path (empty = in-memory only, set path for disk-based cache)
CONTENT_CACHE_PATH=

# Logging
LOG_LEVEL=info

# Telemetry Settings
# Enable/disable gateway telemetry collection
TELEMETRY_ENABLED=true
# Unique identifier for this router instance
TELEMETRY_ROUTER_ID=router-1
# Sampling rate for successful requests (0.0-1.0)
TELEMETRY_SAMPLE_SUCCESS=0.1
# Sampling rate for errors (0.0-1.0, default 1.0 = all errors)
TELEMETRY_SAMPLE_ERRORS=1.0
# Sampling rate for latency measurements (0.0-1.0)
TELEMETRY_SAMPLE_LATENCY=0.1
# SQLite database path for telemetry storage
TELEMETRY_DB_PATH=./data/telemetry.db
# Days to retain telemetry data
TELEMETRY_RETENTION_DAYS=30

# Rate Limiting
# Enable/disable rate limiting (recommended for production)
RATE_LIMIT_ENABLED=false
# Time window for rate limiting (milliseconds, default 1 minute)
RATE_LIMIT_WINDOW_MS=60000
# Maximum requests per IP per window
RATE_LIMIT_MAX_REQUESTS=1000
